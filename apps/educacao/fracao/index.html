<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fração Visual | Plena Educação</title>

    <!-- LIBS -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- FONTS -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: 'Fredoka', sans-serif;
            background-color: #ECFDF5;
            background-image: radial-gradient(#10B981 1px, transparent 1px);
            background-size: 20px 20px;
        }

        input[type=range] {
            -webkit-appearance: none;
            background: transparent;
        }

        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 32px;
            width: 32px;
            border-radius: 50%;
            background: #10B981;
            cursor: pointer;
            margin-top: -12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 8px;
            cursor: pointer;
            background: #D1FAE5;
            border-radius: 999px;
        }

        .liquid-wave {
            animation: wave 3s cubic-bezier(0.36, 0.45, 0.63, 0.53) infinite;
        }

        @keyframes wave {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        [v-cloak] {
            display: none;
        }
    </style>
</head>

<body class="text-slate-800 min-h-screen flex flex-col p-4 md:p-8">

    <div id="app" v-cloak class="max-w-4xl mx-auto w-full flex flex-col gap-8">

        <!-- HEADER -->
        <header
            class="flex items-center gap-4 bg-white/90 backdrop-blur p-4 rounded-2xl shadow-sm border border-emerald-100">
            <a href="../../../index.html"
                class="w-10 h-10 bg-emerald-100 text-emerald-600 flex items-center justify-center rounded-xl hover:bg-emerald-200 transition">
                <i class="fa-solid fa-arrow-left"></i>
            </a>
            <div>
                <h1 class="font-bold text-2xl text-emerald-800">Fração Visual</h1>
                <p class="text-sm text-emerald-600 font-medium">Arraste e veja a mágica acontecer!</p>
            </div>
        </header>

        <!-- CONTROLLER -->
        <section class="bg-white p-8 rounded-3xl shadow-xl border-b-8 border-emerald-200">
            <div class="flex flex-col md:flex-row items-center gap-8 justify-around">

                <!-- NUMERADOR SLIDER -->
                <div class="flex-1 w-full text-center">
                    <label class="block text-sm font-bold text-slate-400 uppercase tracking-widest mb-2">Quantas partes
                        eu quero?</label>
                    <div class="flex items-center gap-4">
                        <button @click="changeNumerator(-1)"
                            class="w-12 h-12 rounded-full bg-slate-100 hover:bg-slate-200 font-bold text-xl transition">-</button>
                        <input type="range" min="0" :max="denominator" v-model.number="numerator" class="w-full h-8">
                        <button @click="changeNumerator(1)"
                            class="w-12 h-12 rounded-full bg-slate-100 hover:bg-slate-200 font-bold text-xl transition">+</button>
                    </div>
                    <div class="text-6xl font-black text-emerald-500 mt-2">{{ numerator }}</div>
                </div>

                <!-- DIVISION LINE -->
                <div class="hidden md:block w-1 h-32 bg-slate-100 rounded-full"></div>

                <!-- DENOMINADOR CONTROL -->
                <div class="flex-1 w-full text-center">
                    <label class="block text-sm font-bold text-slate-400 uppercase tracking-widest mb-2">Total de
                        partes</label>
                    <div class="flex items-center justify-center gap-4">
                        <button @click="changeDenominator(-1)"
                            class="w-10 h-10 rounded-lg bg-orange-100 text-orange-600 hover:bg-orange-200 font-bold transition">
                            <i class="fa-solid fa-minus"></i>
                        </button>
                        <div class="text-6xl font-black text-slate-700">{{ denominator }}</div>
                        <button @click="changeDenominator(1)"
                            class="w-10 h-10 rounded-lg bg-orange-100 text-orange-600 hover:bg-orange-200 font-bold transition">
                            <i class="fa-solid fa-plus"></i>
                        </button>
                    </div>
                </div>

            </div>
        </section>

        <!-- DATA DISPLAY -->
        <section class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-white p-4 rounded-2xl shadow-sm text-center border border-slate-100">
                <div class="text-xs font-bold text-slate-400 uppercase mb-1">Fração</div>
                <div class="text-3xl font-bold text-slate-800">{{ numerator }} / {{ denominator }}</div>
            </div>
            <div class="bg-white p-4 rounded-2xl shadow-sm text-center border border-slate-100">
                <div class="text-xs font-bold text-slate-400 uppercase mb-1">Decimal</div>
                <div class="text-3xl font-bold text-blue-600">{{ (numerator / denominator).toFixed(2) }}</div>
            </div>
            <div class="bg-white p-4 rounded-2xl shadow-sm text-center border border-slate-100">
                <div class="text-xs font-bold text-slate-400 uppercase mb-1">Porcentagem</div>
                <div class="text-3xl font-bold text-purple-600">{{ ((numerator / denominator) * 100).toFixed(0) }}%
                </div>
            </div>
        </section>

        <!-- VISUALIZATIONS -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">

            <!-- 1. PIZZA -->
            <div class="bg-white p-6 rounded-3xl shadow-lg flex flex-col items-center">
                <h3 class="font-bold text-lg mb-4 text-slate-600"><i
                        class="fa-solid fa-pizza-slice text-orange-500 mr-2"></i>Pizza</h3>
                <div class="relative w-48 h-48">
                    <!-- SVG PIE CHART -->
                    <svg viewBox="0 0 100 100" class="w-full h-full transform -rotate-90">
                        <!-- Background Circle -->
                        <circle cx="50" cy="50" r="45" fill="none" stroke="#F1F5F9" stroke-width="10" />
                        <!-- Slices Loop -->
                        <path v-for="(slice, index) in denominator" :key="index" :d="getSlicePath(index, denominator)"
                            :fill="index < numerator ? '#F59E0B' : '#CBD5E1'" stroke="#fff" stroke-width="1"
                            class="transition-all duration-300" />
                    </svg>
                </div>
                <p class="text-center text-sm text-slate-500 mt-4 font-medium">
                    {{ numerator === denominator ? 'Pizza inteira!' : (numerator === 0 ? 'Nenhum pedaço' : `${numerator}
                    pedaços de ${denominator}`) }}
                </p>
            </div>

            <!-- 2. CHOCOLATE BAR -->
            <div class="bg-white p-6 rounded-3xl shadow-lg flex flex-col items-center">
                <h3 class="font-bold text-lg mb-4 text-slate-600"><i
                        class="fa-solid fa-cookie text-amber-700 mr-2"></i>Chocolate</h3>
                <div class="w-32 h-48 bg-amber-100 rounded-lg p-2 gap-1 flex flex-wrap content-start">
                    <div v-for="n in denominator" :key="n"
                        class="bg-amber-800 rounded-sm transition-all duration-300 shadow-sm"
                        :class="n <= numerator ? 'opacity-100 scale-100' : 'opacity-20 scale-90'"
                        :style="{ width: 'calc(50% - 2px)', height: `calc(${100 / Math.ceil(denominator/2)}% - 4px)` }">
                    </div>
                </div>
                <p class="text-center text-sm text-slate-500 mt-4 font-medium">
                    {{ numerator }} quadradinhos
                </p>
            </div>

            <!-- 3. LIQUID CUP -->
            <div class="bg-white p-6 rounded-3xl shadow-lg flex flex-col items-center">
                <h3 class="font-bold text-lg mb-4 text-slate-600"><i
                        class="fa-solid fa-glass-water text-blue-400 mr-2"></i>Copo</h3>
                <div
                    class="relative w-32 h-48 border-4 border-slate-200 border-t-0 rounded-b-3xl overflow-hidden bg-slate-50">
                    <!-- Liquid -->
                    <div class="absolute bottom-0 left-0 w-full bg-blue-400 transition-all duration-500 ease-out opacity-80"
                        :style="{ height: `${(numerator/denominator)*100}%` }">
                        <!-- Wave top (fake) -->
                        <div v-if="numerator > 0 && numerator < denominator"
                            class="absolute -top-2 left-0 w-[200%] h-4 bg-blue-300 rounded-[100%] liquid-wave"></div>
                    </div>

                    <!-- Lines -->
                    <div class="absolute inset-0 flex flex-col justify-between py-2 pointer-events-none">
                        <div v-for="n in (denominator - 1)" :key="n" class="w-full h-px bg-slate-300/50"></div>
                    </div>
                </div>
                <p class="text-center text-sm text-slate-500 mt-4 font-medium">
                    {{ ((numerator/denominator)*100).toFixed(0) }}% cheio
                </p>
            </div>

        </div>

        <!-- FOOTER INFO -->
        <div class="text-center text-slate-400 text-sm">
            <p>Dica: Tente mudar o "Total de partes" para ver como a fração muda!</p>
        </div>

    </div>

    <script>
        const { createApp, ref, computed } = Vue;

        createApp({
            setup() {
                const numerator = ref(1);
                const denominator = ref(4);

                const changeNumerator = (delta) => {
                    const newVal = numerator.value + delta;
                    if (newVal >= 0 && newVal <= denominator.value) {
                        numerator.value = newVal;
                    }
                };

                const changeDenominator = (delta) => {
                    const newVal = denominator.value + delta;
                    if (newVal >= 1 && newVal <= 12) { // Cap at 12 for visual sanity
                        denominator.value = newVal;
                        if (numerator.value > newVal) numerator.value = newVal;
                    }
                };

                // SVG Geometry helper
                const getSlicePath = (index, total) => {
                    const startAngle = (index / total) * 360;
                    const endAngle = ((index + 1) / total) * 360;
                    return describeArc(50, 50, 45, startAngle, endAngle);
                };

                function polarToCartesian(centerX, centerY, radius, angleInDegrees) {
                    var angleInRadians = (angleInDegrees - 90) * Math.PI / 180.0;
                    return {
                        x: centerX + (radius * Math.cos(angleInRadians)),
                        y: centerY + (radius * Math.sin(angleInRadians))
                    };
                }

                function describeArc(x, y, radius, startAngle, endAngle) {
                    var start = polarToCartesian(x, y, radius, endAngle);
                    var end = polarToCartesian(x, y, radius, startAngle);
                    var largeArcFlag = endAngle - startAngle <= 180 ? "0" : "1";
                    var d = [
                        "M", x, y,
                        "L", start.x, start.y,
                        "A", radius, radius, 0, largeArcFlag, 0, end.x, end.y,
                        "L", x, y // Close path to center
                    ].join(" ");
                    return d;
                }

                return {
                    numerator, denominator,
                    changeNumerator, changeDenominator,
                    getSlicePath
                };
            }
        }).mount('#app');
    </script>
</body>

</html>