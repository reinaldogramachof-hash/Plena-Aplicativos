<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Gerador de Senhas | Plena Tools</title>

    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700;800&family=Inter:wght@400;500;600;700&display=swap"
        rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'] },
                    colors: {
                        cyber: {
                            bg: '#0f172a',
                            card: '#1e293b',
                            accent: '#22d3ee',
                            accentHover: '#06b6d4',
                            text: '#f1f5f9',
                            muted: '#94a3b8'
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        [v-cloak] {
            display: none;
        }

        /* Custom Scrollbar for Dark Theme */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #0f172a;
        }

        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }

        .anim-pop {
            animation: pop 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes pop {
            0% {
                transform: scale(0.9);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        /* Slider Styling */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            background: transparent;
        }

        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #22d3ee;
            cursor: pointer;
            margin-top: -8px;
            box-shadow: 0 0 10px rgba(34, 211, 238, 0.5);
        }

        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #334155;
            border-radius: 2px;
        }
    </style>
    <script src="../../../assets/js/plena-lock.js"></script>
</head>

<body class="bg-slate-950 text-slate-200 h-screen overflow-hidden flex flex-col md:flex-row">

    <div id="app" v-cloak class="flex-1 flex h-full w-full relative">

        <!-- DESKTOP SIDEBAR -->
        <aside :class="sidebarOpen ? 'translate-x-0' : '-translate-x-full'"
            class="fixed md:relative md:translate-x-0 w-64 bg-slate-900 text-white h-full z-30 transition-transform duration-300 flex flex-col border-r border-slate-800 shadow-2xl">
            <div class="p-6 flex items-center gap-3 border-b border-slate-800">
                <div
                    class="w-8 h-8 bg-cyan-500 rounded-lg flex items-center justify-center shadow-lg shadow-cyan-500/30">
                    <i class="fa-solid fa-lock text-slate-900 text-sm"></i>
                </div>
                <!-- brand text -->
                <span class="font-bold text-lg tracking-tight">Plena<span class="text-cyan-400">Tools</span></span>
            </div>

            <nav class="flex-1 overflow-y-auto py-6 px-4 space-y-2">
                <button
                    class="w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-slate-800 text-white font-medium shadow-inner border border-slate-700">
                    <i class="fa-solid fa-key w-5 text-cyan-400"></i> Gerador Seguro
                </button>
                <div class="mt-8 px-4 py-2 text-xs font-bold text-slate-500 uppercase tracking-wider">Hist√≥rico Recente
                </div>
                <div class="space-y-1">
                    <div v-for="(pw, idx) in history.slice(0, 5)" :key="idx"
                        class="px-4 py-2 text-xs text-slate-400 hover:text-white transition cursor-pointer font-mono truncate border-l-2 border-transparent hover:border-cyan-500"
                        @click="copyHistory(pw)">
                        {{ pw }}
                    </div>
                    <div v-if="history.length === 0" class="px-4 text-xs text-slate-600 italic">Vazio</div>
                </div>
            </nav>

            <div class="p-4 border-t border-slate-800 text-xs">
                <a href="../../../index.html"
                    class="flex items-center gap-2 text-slate-400 hover:text-white transition text-sm px-2 group">
                    <i class="fa-solid fa-arrow-left group-hover:-translate-x-1 transition-transform"></i> Voltar √† Loja
                </a>
            </div>
        </aside>

        <!-- OVERLAY -->
        <div v-if="sidebarOpen" @click="sidebarOpen = false"
            class="fixed inset-0 bg-black/50 z-20 md:hidden backdrop-blur-sm"></div>

        <!-- MAIN CONTENT -->
        <main class="flex-1 h-full flex flex-col bg-slate-950 relative w-full overflow-y-auto">

            <!-- MOBILE HEADER -->
            <header
                class="md:hidden h-16 bg-slate-900 border-b border-slate-800 flex items-center justify-between px-4 z-10 shrink-0 shadow-md">
                <div class="flex items-center gap-2">
                    <div class="w-8 h-8 bg-cyan-500 rounded-lg flex items-center justify-center text-slate-900">
                        <i class="fa-solid fa-shield-halved text-xs"></i>
                    </div>
                    <span class="font-bold text-white tracking-tight">Plena<span class="text-cyan-400">Sec</span></span>
                </div>
                <button @click="sidebarOpen = !sidebarOpen"
                    class="w-10 h-10 flex items-center justify-center text-slate-400 hover:bg-slate-800 rounded-lg transition">
                    <i class="fa-solid fa-bars text-lg"></i>
                </button>
            </header>

            <div
                class="flex-1 flex flex-col items-center justify-center p-4 md:p-8 min-h-[calc(100vh-4rem)] md:min-h-screen">

                <div class="w-full max-w-lg animate-fade-in-up">
                    <div class="text-center mb-8">
                        <div
                            class="inline-flex items-center justify-center w-16 h-16 bg-slate-900 rounded-2xl mb-4 border border-slate-800 shadow-xl shadow-cyan-500/10">
                            <i class="fa-solid fa-fingerprint text-3xl text-cyan-400"></i>
                        </div>
                        <h1 class="text-3xl font-bold text-white mb-2">Gerador <span
                                class="text-cyan-400">Inquebr√°vel</span></h1>
                        <p class="text-slate-500">Crie senhas de alta seguran√ßa com um clique.</p>
                    </div>

                    <!-- Generator Card -->
                    <div
                        class="bg-slate-900 border border-slate-800 rounded-3xl p-6 shadow-2xl relative overflow-hidden backdrop-blur-sm bg-opacity-80">

                        <!-- Blob decoration -->
                        <div
                            class="absolute -top-20 -right-20 w-40 h-40 bg-cyan-500 rounded-full blur-[80px] opacity-10 pointer-events-none">
                        </div>

                        <!-- Result Display -->
                        <div class="relative mb-8 group">
                            <div
                                class="bg-slate-950 rounded-xl p-5 border border-slate-800 flex items-center justify-between transition-all group-hover:border-cyan-500/50 shadow-inner">
                                <div class="font-mono text-xl md:text-2xl break-all text-white font-bold tracking-wide mr-4 truncate"
                                    :class="password ? '' : 'text-slate-600'">
                                    {{ password || '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢' }}
                                </div>

                                <div class="flex items-center gap-2">
                                    <button @click="generate"
                                        class="md:hidden w-10 h-10 rounded-lg bg-slate-900 text-cyan-500 hover:text-white flex items-center justify-center transition border border-slate-800">
                                        <i class="fa-solid fa-rotate"></i>
                                    </button>
                                    <button @click="copyToClipboard"
                                        class="w-10 h-10 rounded-lg bg-cyan-500/10 text-cyan-400 hover:bg-cyan-500 hover:text-slate-900 transition flex items-center justify-center relative"
                                        title="Copiar">
                                        <i class="fa-regular" :class="copied ? 'fa-circle-check' : 'fa-copy'"></i>
                                        <span v-if="copied"
                                            class="absolute -top-10 left-1/2 -translate-x-1/2 bg-cyan-500 text-slate-900 text-xs font-bold px-3 py-1 rounded shadow-lg anim-pop">Copiado!</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Strength Bar -->
                            <div class="flex gap-1.5 mt-3 px-1">
                                <div v-for="i in 4" :key="i"
                                    class="flex-1 h-1.5 rounded-full transition-all duration-500 bg-slate-800 overflow-hidden">
                                    <div class="h-full w-full transition-transform duration-500 origin-left"
                                        :class="strengthScore >= i ? strengthColor : 'scale-x-0'"></div>
                                </div>
                            </div>
                            <div class="flex justify-between px-1 mt-2">
                                <span class="text-[10px] text-slate-500 uppercase font-bold tracking-wider">For√ßa da
                                    Senha</span>
                                <span class="text-[10px] font-bold uppercase transition-colors"
                                    :class="strengthTextColor">{{ strengthLabel }}</span>
                            </div>
                        </div>

                        <!-- Controls -->
                        <div class="space-y-6">
                            <!-- Length Slider -->
                            <div>
                                <div class="flex justify-between items-center mb-3">
                                    <label
                                        class="text-xs font-bold text-slate-400 uppercase tracking-wider">Comprimento</label>
                                    <span
                                        class="text-cyan-400 font-mono font-bold text-lg bg-slate-950 px-3 py-1 rounded-lg border border-slate-800 min-w-[3rem] text-center">{{
                                        length }}</span>
                                </div>
                                <input type="range" v-model.number="length" min="6" max="64" step="1" class="w-full">
                            </div>

                            <!-- Toggles -->
                            <div class="grid grid-cols-2 gap-3">
                                <button v-for="(val, key) in displayOptions" :key="key" @click="toggle(key)"
                                    class="p-3 rounded-xl border flex items-center justify-between transition group hover:bg-slate-800"
                                    :class="options[key] ? 'bg-slate-800 border-cyan-500/50 text-white shadow-[0_0_15px_-3px_rgba(34,211,238,0.15)]' : 'bg-transparent border-slate-800 text-slate-500'">
                                    <span class="text-sm font-medium">{{ val.label }}</span>
                                    <div class="w-5 h-5 rounded border flex items-center justify-center transition-colors"
                                        :class="options[key] ? 'border-cyan-500 bg-cyan-500' : 'border-slate-600'">
                                        <i class="fa-solid fa-check text-slate-900 text-[10px]" v-if="options[key]"></i>
                                    </div>
                                </button>
                            </div>
                        </div>

                        <!-- Action -->
                        <div class="mt-8">
                            <button @click="generate"
                                class="w-full bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-400 hover:to-blue-500 text-white font-bold py-4 rounded-xl shadow-lg shadow-cyan-500/20 transition transform active:scale-[0.98] flex items-center justify-center gap-3 text-lg group">
                                <i class="fa-solid fa-bolt group-hover:animate-pulse"></i> GERAR NOVA SENHA
                            </button>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script>
        const { createApp, ref, computed, onMounted, watch } = Vue;
        const DB_KEY = 'plena_senha_config_v2';

        createApp({
            setup() {
                const sidebarOpen = ref(false);
                const length = ref(16);
                const options = ref({
                    uppercase: true,
                    lowercase: true,
                    numbers: true,
                    symbols: true
                });

                const displayOptions = {
                    uppercase: { label: 'ABC Mai√∫sculas' },
                    lowercase: { label: 'abc Min√∫sculas' },
                    numbers: { label: '123 N√∫meros' },
                    symbols: { label: '!@# S√≠mbolos' }
                };

                const password = ref('');
                const copied = ref(false);
                const history = ref([]);

                // Load config
                onMounted(() => {
                    const d = localStorage.getItem(DB_KEY);
                    if (d) {
                        try {
                            const parsed = JSON.parse(d);
                            length.value = parsed.length || 16;
                            if (parsed.options) options.value = parsed.options;
                        } catch (e) { }
                    }
                    generate(); // Generate one on start
                });

                watch([length, options], () => {
                    localStorage.setItem(DB_KEY, JSON.stringify({ length: length.value, options: options.value }));
                }, { deep: true });

                const toggle = (key) => {
                    options.value[key] = !options.value[key];
                    if (!Object.values(options.value).some(v => v)) {
                        options.value[key] = true;
                    }
                };

                const generate = () => {
                    const sets = {
                        uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
                        lowercase: 'abcdefghijklmnopqrstuvwxyz',
                        numbers: '0123456789',
                        symbols: '!@#$%^&*()_+~`|}{[]:;?><,./-='
                    };

                    let chars = '';
                    let result = '';

                    Object.keys(options.value).forEach(key => {
                        if (options.value[key]) chars += sets[key];
                    });

                    if (!chars) return;

                    const array = new Uint32Array(length.value);
                    window.crypto.getRandomValues(array);

                    for (let i = 0; i < length.value; i++) {
                        result += chars.charAt(array[i] % chars.length);
                    }

                    password.value = result;
                    copied.value = false;

                    // Add to history
                    if (history.value[0] !== result) {
                        history.value.unshift(result);
                        if (history.value.length > 10) history.value.pop();
                    }
                };

                const copyToClipboard = () => {
                    if (!password.value) return;
                    navigator.clipboard.writeText(password.value).then(() => {
                        copied.value = true;
                        setTimeout(() => copied.value = false, 2000);
                    });
                };

                const copyHistory = (pw) => {
                    navigator.clipboard.writeText(pw).then(() => {
                        alert('Senha copiada!');
                    });
                };

                // Strength Scoring
                const strengthScore = computed(() => {
                    let score = 0;
                    if (length.value >= 8) score++;
                    if (length.value >= 12) score++;
                    if (length.value >= 16) score++;

                    let variety = 0;
                    if (options.value.uppercase) variety++;
                    if (options.value.lowercase) variety++;
                    if (options.value.numbers) variety++;
                    if (options.value.symbols) variety++;

                    if (variety >= 3) score++;

                    if (score > 4) score = 4;
                    if (length.value < 8) score = 1;

                    return score;
                });

                const strengthLabel = computed(() => {
                    const labels = ['Muito Fraca', 'Fraca', 'M√©dia', 'Forte', 'Inquebr√°vel üîí'];
                    return labels[strengthScore.value];
                });

                const strengthColor = computed(() => {
                    const colors = ['bg-red-500', 'bg-red-500', 'bg-yellow-500', 'bg-emerald-500', 'bg-cyan-500'];
                    return colors[strengthScore.value];
                });

                const strengthTextColor = computed(() => {
                    const colors = ['text-red-500', 'text-red-500', 'text-yellow-500', 'text-emerald-500', 'text-cyan-400'];
                    return colors[strengthScore.value];
                });

                return {
                    sidebarOpen, length, options, displayOptions, password, copied, history,
                    toggle, generate, copyToClipboard, copyHistory,
                    strengthScore, strengthLabel, strengthColor, strengthTextColor
                };
            }
        }).mount('#app');
    </script>
</body>

</html>