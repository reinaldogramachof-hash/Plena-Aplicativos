<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sorteios & Dados | Plena Aplicativos</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Inter:wght@400;600;800&display=swap"
        rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'], rpg: ['Cinzel', 'serif'] },
                    colors: {
                        magic: { 50: '#faf5ff', 500: '#a855f7', 600: '#9333ea', 900: '#581c87', dark: '#2e1065' }
                    },
                    animation: {
                        'bounce-fast': 'bounce 0.5s infinite',
                        'spin-fast': 'spin 0.5s linear infinite',
                        'pulse-fast': 'pulse 0.5s cubic-bezier(0.4, 0, 0.6, 1) infinite'
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #2e1065;
            color: #fff;
            font-family: 'Inter', sans-serif;
        }

        .die-face {
            box-shadow: inset -5px -5px 10px rgba(0, 0, 0, 0.4), inset 5px 5px 10px rgba(255, 255, 255, 0.1);
        }

        .coin-flip {
            animation: flip 1s ease-out forwards;
        }

        @keyframes flip {
            0% {
                transform: rotateY(0);
            }

            100% {
                transform: rotateY(1800deg);
            }
        }

        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-thumb {
            background: #9333ea;
            border-radius: 3px;
        }
    </style>
</head>

<body class="h-screen overflow-hidden flex flex-col md:flex-row">

    <div id="app"
        class="flex-1 flex h-full w-full relative max-w-5xl mx-auto shadow-2xl md:border-x border-magic-600/30">

        <!-- Sidebar Modes -->
        <aside
            class="w-full md:w-24 bg-magic-900 border-r border-magic-600/30 z-10 flex md:flex-col items-center justify-center md:justify-start p-2 gap-2 shadow-xl">

            <div class="hidden md:flex p-2 mb-4 text-magic-500">
                <i class="fa-solid fa-dice-d20 text-3xl"></i>
            </div>

            <button v-for="m in modes" :key="m.id" @click="currentMode = m.id"
                class="p-3 rounded-xl transition flex flex-col items-center gap-1 w-full md:w-auto relative group overflow-hidden"
                :class="currentMode === m.id ? 'bg-magic-600 text-white shadow-lg shadow-magic-600/50 scale-105' : 'text-magic-300 hover:bg-magic-800'">
                <i :class="m.icon" class="text-xl"></i>
                <span class="text-[9px] font-bold uppercase tracking-wider">{{ m.label }}</span>
                <div v-if="currentMode === m.id" class="absolute inset-0 bg-white/10 animate-pulse"></div>
            </button>
        </aside>

        <!-- Main Content -->
        <main
            class="flex-1 bg-gradient-to-br from-[#2e1065] via-[#3b0764] to-[#2e1065] relative overflow-hidden flex flex-col items-center justify-center">

            <!-- Background Decoration -->
            <div class="absolute inset-0 overflow-hidden pointer-events-none opacity-20">
                <i class="fa-solid fa-dice-d20 absolute top-10 right-10 text-9xl text-magic-500 animate-pulse"></i>
                <i class="fa-solid fa-dragon absolute bottom-10 left-10 text-9xl text-magic-500"></i>
            </div>

            <div class="h-full w-full flex flex-col relative z-10 p-4 md:p-8 max-w-2xl">

                <!-- Header -->
                <div class="text-center mb-8">
                    <h2
                        class="font-rpg text-3xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-200 to-pink-400 drop-shadow-lg">
                        {{ getTitle }}
                    </h2>
                </div>

                <!-- DICE MODE -->
                <div v-if="currentMode === 'dice'" class="flex-1 flex flex-col">

                    <!-- Result Display -->
                    <div class="flex-1 flex items-center justify-center min-h-[200px] perspective-1000">
                        <div v-if="rolling"
                            class="text-6xl md:text-8xl font-rpg font-bold text-white animate-bounce-fast opacity-50 blur-sm">
                            ...
                        </div>
                        <div v-else class="relative group cursor-pointer" @click="rollDice">
                            <div
                                class="w-40 h-40 md:w-56 md:h-56 rounded-full bg-gradient-to-br from-magic-500 to-magic-900 border-4 border-magic-300 flex items-center justify-center shadow-[0_0_50px_rgba(168,85,247,0.5)] transform transition hover:scale-105 die-face">
                                <span class="text-7xl md:text-9xl font-rpg font-bold text-white drop-shadow-md">{{
                                    displayResult }}</span>
                            </div>
                            <div
                                class="absolute -bottom-10 w-full text-center text-magic-300 text-sm animate-pulse-fast">
                                Toque para rolar
                            </div>
                        </div>
                    </div>

                    <!-- Controls -->
                    <div class="grid grid-cols-3 md:grid-cols-6 gap-3 mt-8">
                        <button v-for="d in diceTypes" :key="d" @click="selectDie(d)"
                            class="p-4 rounded-xl border border-magic-500/30 bg-magic-900/50 hover:bg-magic-600 transition flex flex-col items-center gap-1 group"
                            :class="selectedDie === d ? 'bg-magic-600 border-magic-400 ring-2 ring-magic-300 text-white' : 'text-magic-300'">
                            <span class="text-xs font-bold opacity-50 group-hover:opacity-100">D{{ d }}</span>
                            <i class="fa-solid fa-dice-d20 text-xl"
                                :class="selectedDie === d ? 'animate-spin-slow' : ''"></i>
                        </button>
                    </div>

                </div>

                <!-- COIN MODE -->
                <div v-if="currentMode === 'coin'" class="flex-1 flex flex-col items-center justify-center">

                    <div class="relative w-48 h-48 mb-12 cursor-pointer perspective-1000" @click="flipCoin">
                        <div class="w-full h-full rounded-full bg-gradient-to-tr from-yellow-400 to-yellow-600 border-4 border-yellow-200 shadow-[0_0_40px_rgba(234,179,8,0.4)] flex items-center justify-center text-4xl font-rpg font-bold text-yellow-900 shadow-inner transform-style-3d transition-transform duration-1000"
                            :style="{ transform: coinFlipping ? 'rotateY(1800deg)' : (coinResult === 'Coroa' ? 'rotateY(180deg)' : 'rotateY(0deg)') }">
                            <!-- Simple visual hack: we just rotate it like crazy and then set text -->
                            <span>{{ coinFlipping ? '' : coinResult }}</span>
                            <div v-if="coinFlipping"
                                class="absolute inset-0 rounded-full bg-yellow-400 blur-md animate-pulse"></div>
                        </div>
                    </div>

                    <button @click="flipCoin" :disabled="coinFlipping"
                        class="bg-yellow-500 hover:bg-yellow-400 text-yellow-900 font-bold px-12 py-4 rounded-full shadow-lg shadow-yellow-500/20 text-xl transition transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed">
                        {{ coinFlipping ? 'Girando...' : 'JOGAR MOEDA' }}
                    </button>

                </div>

                <!-- RANDOM MODE -->
                <div v-if="currentMode === 'random'" class="flex-1 flex flex-col items-center justify-center w-full">

                    <div class="bg-white/5 p-6 rounded-2xl border border-white/10 w-full mb-8 backdrop-blur-sm">
                        <div class="flex gap-4 items-center">
                            <div class="flex-1">
                                <label class="text-xs uppercase font-bold text-magic-300 mb-1 block">Mínimo</label>
                                <input type="number" v-model.number="range.min"
                                    class="w-full bg-magic-900/50 border border-magic-600 rounded-lg p-3 text-center text-xl font-bold outline-none focus:border-magic-400 transition">
                            </div>
                            <span class="text-2xl text-magic-500 font-bold">-</span>
                            <div class="flex-1">
                                <label class="text-xs uppercase font-bold text-magic-300 mb-1 block">Máximo</label>
                                <input type="number" v-model.number="range.max"
                                    class="w-full bg-magic-900/50 border border-magic-600 rounded-lg p-3 text-center text-xl font-bold outline-none focus:border-magic-400 transition">
                            </div>
                        </div>
                    </div>

                    <div class="text-8xl md:text-9xl font-bold text-white mb-8 transition-all scale-100"
                        :class="rolling ? 'blur-sm scale-90' : ''">
                        {{ randomResult }}
                    </div>

                    <button @click="generateRandom"
                        class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-4 rounded-xl shadow-lg shadow-indigo-600/30 text-lg transition flex items-center justify-center gap-2 active:translate-y-1">
                        <i class="fa-solid fa-shuffle"></i> SORTEAR NÚMERO
                    </button>

                </div>

            </div>

        </main>

        <!-- Right Sidebar History -->
        <aside class="w-full md:w-64 bg-[#230b4d] border-l border-magic-600/30 z-10 flex flex-col h-40 md:h-full">
            <div class="p-4 border-b border-magic-600/30 bg-magic-900/50">
                <h3 class="font-bold text-magic-300 text-sm uppercase tracking-wider"><i
                        class="fa-solid fa-clock-rotate-left mr-2"></i> Histórico</h3>
            </div>
            <div class="flex-1 overflow-y-auto p-4 space-y-2 text-sm md:text-base">
                <div v-for="(h, idx) in history" :key="idx"
                    class="flex justify-between items-center text-white/70 border-b border-white/5 pb-1 animate-fadeIn">
                    <span class="text-xs text-magic-400">{{ h.time }}</span>
                    <span class="font-bold" :class="h.type === 'Erro' ? 'text-red-400' : 'text-white'">{{ h.val
                        }}</span>
                    <span class="text-[10px] uppercase bg-white/10 px-1.5 py-0.5 rounded">{{ h.type }}</span>
                </div>
                <div v-if="history.length === 0" class="text-center text-white/20 py-4 text-xs">
                    Nada sorteado ainda
                </div>
            </div>
            <button @click="clearHistory" v-if="history.length > 0"
                class="m-4 text-xs text-magic-400 hover:text-white underline">Limpar Histórico</button>
        </aside>

    </div>

    <script>
        const { createApp, ref, computed, onMounted } = Vue;

        createApp({
            setup() {
                const modes = [
                    { id: 'dice', label: 'Dados RPG', icon: 'fa-solid fa-dice' },
                    { id: 'coin', label: 'Moeda', icon: 'fa-solid fa-coins' },
                    { id: 'random', label: 'Número', icon: 'fa-solid fa-arrow-down-9-1' }
                ];

                const currentMode = ref('dice');
                const history = ref([]);

                // Dice
                const diceTypes = [4, 6, 8, 10, 12, 20];
                const selectedDie = ref(20);
                const displayResult = ref(20);
                const rolling = ref(false);

                // Coin
                const coinResult = ref('Cara');
                const coinFlipping = ref(false);

                // Random
                const range = ref({ min: 1, max: 100 });
                const randomResult = ref('?');

                const getTitle = computed(() => {
                    if (currentMode.value === 'dice') return 'Dados RPG';
                    if (currentMode.value === 'coin') return 'Cara ou Coroa';
                    return 'Número Aleatório';
                });

                const addToHistory = (val, type) => {
                    history.value.unshift({
                        time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' }),
                        val,
                        type
                    });
                    if (history.value.length > 30) history.value.pop();
                };

                const rollDice = () => {
                    if (rolling.value) return;
                    rolling.value = true;

                    let interval = setInterval(() => {
                        displayResult.value = Math.floor(Math.random() * selectedDie.value) + 1;
                    }, 50);

                    setTimeout(() => {
                        clearInterval(interval);
                        const final = Math.floor(Math.random() * selectedDie.value) + 1;
                        displayResult.value = final;
                        rolling.value = false;
                        addToHistory(final, `D${selectedDie.value}`);
                    }, 600);
                };

                const selectDie = (d) => {
                    selectedDie.value = d;
                    displayResult.value = d;
                };

                const flipCoin = () => {
                    if (coinFlipping.value) return;
                    coinFlipping.value = true;

                    setTimeout(() => {
                        const res = Math.random() > 0.5 ? 'Cara' : 'Coroa';
                        coinResult.value = res;
                        coinFlipping.value = false;
                        addToHistory(res, 'Moeda');
                    }, 1000);
                };

                const generateRandom = () => {
                    if (rolling.value) return;
                    if (range.value.min >= range.value.max) {
                        alert('Mínimo deve ser menor que Máximo');
                        return;
                    }

                    rolling.value = true;
                    let interval = setInterval(() => {
                        randomResult.value = Math.floor(Math.random() * (range.value.max - range.value.min + 1)) + range.value.min;
                    }, 50);

                    setTimeout(() => {
                        clearInterval(interval);
                        const final = Math.floor(Math.random() * (range.value.max - range.value.min + 1)) + range.value.min;
                        randomResult.value = final;
                        rolling.value = false;
                        addToHistory(final, `${range.value.min}-${range.value.max}`);
                    }, 500);
                };

                const clearHistory = () => history.value = [];

                return {
                    modes, currentMode, history, getTitle,
                    diceTypes, selectedDie, displayResult, rolling, rollDice, selectDie,
                    coinResult, coinFlipping, flipCoin,
                    range, randomResult, generateRandom,
                    clearHistory
                };
            }
        }).mount('#app');
    </script>
</body>

</html>