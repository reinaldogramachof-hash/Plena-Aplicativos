<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora do Amor | Plena Apps</title>
    <!-- LIBS -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@500;700&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
        }

        h1 {
            font-family: 'Pacifico', cursive;
        }

        [v-cloak] {
            display: none;
        }

        .heart-beat {
            animation: heartbeat 1.5s infinite;
        }

        @keyframes heartbeat {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }

            100% {
                transform: scale(1);
            }
        }
    </style>
</head>

<body class="bg-pink-100 text-pink-900 overflow-hidden">

    <div id="app" v-cloak
        class="max-w-md mx-auto min-h-screen bg-white/50 backdrop-blur shadow-2xl flex flex-col items-center justify-center p-6 relative">

        <!-- BG HEARTS -->
        <i class="fa-solid fa-heart text-pink-200 absolute top-10 left-10 text-6xl opacity-50 -rotate-12"></i>
        <i class="fa-solid fa-heart text-pink-200 absolute bottom-20 right-10 text-8xl opacity-50 rotate-12"></i>

        <!-- TITLE -->
        <h1 class="text-4xl text-pink-600 mb-8 drop-shadow-sm text-center">Calculadora do Amor</h1>

        <!-- INPUTS -->
        <div class="w-full space-y-4 relative z-10 bg-white p-6 rounded-3xl shadow-xl border border-pink-100"
            v-if="state === 'input'">
            <div class="text-center mb-4 text-sm text-pink-400 font-bold">Ser√° que d√° match? ü§î</div>

            <div class="relative">
                <i class="fa-solid fa-user absolute left-4 top-4 text-pink-300"></i>
                <input v-model="name1" type="text" placeholder="Seu Nome"
                    class="w-full bg-pink-50 rounded-xl py-3 pl-12 pr-4 border border-pink-100 focus:border-pink-500 outline-none text-pink-800 font-bold">
            </div>

            <div class="flex justify-center -my-2 relative z-20">
                <div class="bg-white rounded-full p-2 shadow-sm border border-pink-100">
                    <i class="fa-solid fa-heart text-red-500 text-xl heart-beat"></i>
                </div>
            </div>

            <div class="relative">
                <i class="fa-solid fa-user absolute left-4 top-4 text-pink-300"></i>
                <input v-model="name2" type="text" placeholder="Nome do @Crush"
                    class="w-full bg-pink-50 rounded-xl py-3 pl-12 pr-4 border border-pink-100 focus:border-pink-500 outline-none text-pink-800 font-bold">
            </div>

            <button @click="calculate" :disabled="!name1 || !name2"
                class="w-full mt-4 bg-gradient-to-r from-pink-500 to-red-500 hover:from-pink-600 hover:to-red-600 text-white font-bold py-4 rounded-xl shadow-lg transform transition active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed">
                Calcular Compatibilidade
            </button>
        </div>

        <!-- LOADING -->
        <div v-else-if="state === 'calculating'" class="text-center z-10">
            <div class="text-6xl mb-4 animate-bounce">‚ù§Ô∏è</div>
            <p class="text-pink-600 font-bold animate-pulse">Analisando os astros...</p>
        </div>

        <!-- RESULT -->
        <div v-else class="w-full z-10 text-center animate-fade-in-up">

            <div class="bg-white p-8 rounded-full w-64 h-64 mx-auto flex flex-col items-center justify-center shadow-[0_0_50px_rgba(236,72,153,0.3)] border-4 mb-8"
                :class="percentage > 70 ? 'border-green-400' : (percentage < 30 ? 'border-red-400' : 'border-yellow-400')">
                <span
                    class="text-6xl font-bold bg-clip-text text-transparent bg-gradient-to-br from-pink-500 to-red-600">{{
                    percentage }}%</span>
                <span class="text-xs font-bold text-slate-400 mt-2 uppercase tracking-widest">Compatibilidade</span>
            </div>

            <h2 class="text-2xl font-bold text-pink-700 mb-2">{{ message.title }}</h2>
            <p class="text-pink-500/80 mb-8 text-sm px-4">{{ message.desc }}</p>

            <button @click="share"
                class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-4 rounded-xl shadow-lg flex items-center justify-center gap-2 mb-4 transition">
                <i class="fa-brands fa-whatsapp text-xl"></i> Contar pro Crush
            </button>

            <button @click="reset" class="text-pink-400 text-sm font-bold underline">Testar outro casal</button>

        </div>

    </div>

    <script>
        const { createApp, ref } = Vue;

        createApp({
            setup() {
                const state = ref('input'); // input, calculating, result
                const name1 = ref('');
                const name2 = ref('');
                const percentage = ref(0);
                const message = ref({});

                const calculate = () => {
                    state.value = 'calculating';

                    setTimeout(() => {
                        // Deterministic algorithm based on string char codes
                        // Ensures same names always get same result
                        const str = (name1.value + name2.value).toLowerCase().replace(/\s/g, '');
                        let hash = 0;
                        for (let i = 0; i < str.length; i++) {
                            hash = str.charCodeAt(i) + ((hash << 5) - hash);
                        }

                        // Normalized 0-100
                        let p = Math.abs(hash % 101);

                        // "Easter Eggs" logic or Adjustments
                        if (p === 0) p = 12; // Avoid 0, too sad

                        percentage.value = p;
                        message.value = getMessage(p);
                        state.value = 'result';
                    }, 2000);
                };

                const getMessage = (p) => {
                    if (p >= 90) return { title: "Almas G√™meas! üíç", desc: "J√° podem marcar a data do casamento. √â destino puro!" };
                    if (p >= 70) return { title: "Casalza√ßo! üî•", desc: "A qu√≠mica √© forte e as estrelas aprovam." };
                    if (p >= 40) return { title: "Tem potencial... ü§î", desc: "Com um pouco de esfor√ßo (e paci√™ncia), pode rolar." };
                    if (p >= 20) return { title: "Friendzone? üò¨", desc: "Talvez voc√™s funcionem melhor como amigos..." };
                    return { title: "√â Cilada, Bino! üö®", desc: "Corre que √© furada! O universo disse N√ÉO." };
                };

                const share = () => {
                    let text = `üíò *CALCULADORA DO AMOR* üíò\n\n`;
                    text += `üë©‚Äç‚ù§Ô∏è‚Äçüë® ${name1.value} + ${name2.value}\n`;
                    text += `üìä Resultado: *${percentage.value}%*\n\n`;
                    text += `üì¢ *${message.value.title}*\n`;
                    text += `_${message.value.desc}_\n\n`;
                    text += `_Fa√ßa o teste voc√™ tamb√©m!_`;

                    const url = `https://wa.me/?text=${encodeURIComponent(text)}`;
                    window.open(url, '_blank');
                };

                const reset = () => {
                    state.value = 'input';
                    name1.value = '';
                    name2.value = '';
                };

                return {
                    state, name1, name2, percentage, message, calculate, share, reset
                };
            }
        }).mount('#app');
    </script>
</body>

</html>