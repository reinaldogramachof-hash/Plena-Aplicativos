<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora do Amor | Plena Apps</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #ffe4e6;
            font-family: 'Segoe UI', sans-serif;
        }

        .font-hand {
            font-family: 'Pacifico', cursive;
        }

        [v-cloak] {
            display: none;
        }

        @keyframes heartbeat {
            0% {
                transform: scale(1);
            }

            15% {
                transform: scale(1.3);
            }

            30% {
                transform: scale(1);
            }

            45% {
                transform: scale(1.15);
            }

            60% {
                transform: scale(1);
            }
        }

        .heart-beat {
            animation: heartbeat 1.5s infinite;
        }
    </style>
    <script src="../../../assets/js/plena-lock.js"></script>
</head>

<body class="pb-20 flex flex-col items-center justify-center min-h-screen">

    <div id="app" v-cloak
        class="w-full max-w-md bg-white/80 backdrop-blur-sm p-8 rounded-3xl shadow-xl flex flex-col items-center border border-pink-100">

        <h1 class="text-4xl text-pink-600 font-hand mb-6">Love Calc <i class="fa-solid fa-heart text-red-500"></i></h1>

        <div class="w-full space-y-4 relative z-10">
            <div>
                <label class="text-xs text-pink-400 font-bold uppercase ml-2">Seu Nome</label>
                <input v-model="name1"
                    class="w-full bg-pink-50 border-2 border-pink-100 rounded-full px-4 py-3 outline-none focus:border-pink-400 text-pink-600 font-bold"
                    placeholder="Romeo">
            </div>

            <div class="flex justify-center -my-2 relative z-20">
                <div class="bg-white rounded-full p-2 shadow text-pink-300 font-bold text-xl">+</div>
            </div>

            <div>
                <label class="text-xs text-pink-400 font-bold uppercase ml-2">Crush</label>
                <input v-model="name2"
                    class="w-full bg-pink-50 border-2 border-pink-100 rounded-full px-4 py-3 outline-none focus:border-pink-400 text-pink-600 font-bold"
                    placeholder="Julieta">
            </div>
        </div>

        <button @click="calculate"
            class="mt-8 bg-gradient-to-r from-pink-500 to-red-500 hover:from-pink-600 hover:to-red-600 text-white text-lg font-bold py-4 px-10 rounded-full shadow-lg transition transform hover:scale-105">
            CALCULAR AMOR
        </button>

        <!-- RESULT MODAL -->
        <div v-if="result !== null" class="fixed inset-0 bg-pink-900/40 z-50 flex items-center justify-center p-4">
            <div
                class="bg-white rounded-3xl p-8 text-center shadow-2xl max-w-xs w-full animate-fade-in relative overflow-hidden">
                <button @click="result = null" class="absolute top-4 right-4 text-gray-300 hover:text-gray-500"><i
                        class="fa-solid fa-xmark"></i></button>

                <h2 class="text-gray-400 text-sm uppercase font-bold mb-4">{{ name1 }} + {{ name2 }}</h2>

                <div
                    class="text-8xl font-black text-transparent bg-clip-text bg-gradient-to-b from-red-500 to-pink-600 heart-beat py-2">
                    {{ result }}%
                </div>

                <p class="text-pink-600 font-hand text-2xl my-4">{{ message }}</p>

                <button @click="shareWhatsapp"
                    class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-xl shadow flex items-center justify-center gap-2">
                    <i class="fa-brands fa-whatsapp"></i> Compartilhar
                </button>
            </div>
        </div>

    </div>

    <script>
        const { createApp, ref, computed } = Vue;

        createApp({
            setup() {
                const name1 = ref('');
                const name2 = ref('');
                const result = ref(null);

                const calculate = () => {
                    if (!name1.value || !name2.value) return alert('Digite os dois nomes!');

                    // Allow "admin" override or just consistent hashing
                    // Simple hash: Sum of char codes % 101
                    const combined = (name1.value + name2.value).toLowerCase().replace(/\s/g, '');
                    let hash = 0;
                    for (let i = 0; i < combined.length; i++) hash += combined.charCodeAt(i);

                    // Pseudo-random but consistent per pair
                    result.value = hash % 101;
                };

                const message = computed(() => {
                    const r = result.value;
                    if (r > 90) return "Almas GÃªmeas! ðŸ”¥";
                    if (r > 70) return "Amor Verdadeiro â¤ï¸";
                    if (r > 50) return "Pode dar certo... ðŸ˜‰";
                    if (r > 30) return "SÃ³ amizade? Friendzone ðŸ˜¬";
                    return "Corre que Ã© cilada! ðŸƒ";
                });

                const shareWhatsapp = () => {
                    const text = `ðŸ’˜ *Calculadora do Amor*\n\n${name1.value} + ${name2.value} = *${result.value}%*\n${message.value}\n\nTeste o seu em: Plena Apps`;
                    window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
                };

                return { name1, name2, result, calculate, message, shareWhatsapp };
            }
        }).mount('#app');
    </script>
</body>

</html>